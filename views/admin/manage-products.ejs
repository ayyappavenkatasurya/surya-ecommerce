<%# Example: views/admin/manage-products.ejs %>
<%- include('../partials/header', { title: 'Manage Products' }) %>

<div class="admin-manage-container">
    <h1>Manage Products</h1>
    <a href="/admin/upload-product" class="btn btn-primary mb-3"><i class="fas fa-plus"></i> Upload New Product</a>

   <% if (products.length > 0) { %>
       <div class="table-container card"> <%# WRAP with .table-container and .card %>
           <table class="data-table">
               <thead>
                   <tr>
                       <th>Image</th>
                       <th>Name</th>
                       <th>Category</th>
                       <th>Price</th>
                       <th>Stock</th>
                       <th>Sold</th>
                       <th>Rating</th>
                       <th class="actions-cell" style="text-align: right;">Actions</th> <%# Align header right %>
                   </tr>
                </thead>
                <tbody>
                   <% products.forEach(product => { %>
                       <tr>
                           <td data-label="Image"><a href="/products/<%= product._id %>"><img src="<%= product.imageUrl %>" alt="<%= product.name %>" class="table-img"></a></td>
                            <td data-label="Name"><%= product.name %></td>
                            <td data-label="Category"><%= product.category %></td>
                            <td data-label="Price">â‚¹<%= product.price.toFixed(2) %></td>
                            <td data-label="Stock"><%= product.stock %></td>
                            <td data-label="Sold"><%= product.orderCount %></td>
                            <td data-label="Rating"><%= product.averageRating.toFixed(1) %> (<%= product.numReviews %>)</td>
                            <td data-label="Actions" class="actions-cell">
                               <a href="/admin/manage-products/edit/<%= product._id %>" class="btn btn-text btn-sm" title="Edit"><i class="fas fa-edit"></i></a> <%# Text button for icon %>
                               <form action="/admin/manage-products/remove/<%= product._id %>" method="POST" class="inline-form form-submit-spinner" onsubmit="return confirm('Are you sure you want to remove this product: <%= product.name %>?');">
                                    <button type="submit" class="btn btn-text btn-danger btn-sm" title="Remove"><i class="fas fa-trash"></i></button> <%# Text button for icon %>
                               </form>
                           </td>
                        </tr>
                    <% }) %>
               </tbody>
            </table>
       </div>
   <% } else { %>
        <p class="text-muted mt-3">No products found. <a href="/admin/upload-product">Upload the first product!</a></p>
   <% } %>
</div>

<%- include('../partials/footer') %>