 <%- include('../partials/header', { title: 'Manage Assigned Orders' }) %>

 <div class="admin-manage-container">
     <h1>Manage Delivery Admins & Assigned Orders</h1>

     <% if (deliveryAdmins.length > 0) { %>
         <table class="data-table">
             <thead>
                <tr>
                     <th>Delivery Admin</th>
                    <th>Total Assigned</th>
                    <th>Pending Deliveries</th>
                     <th>Delivered</th>
                     <th>Actions</th>
                </tr>
            </thead>
             <tbody>
                <% deliveryAdmins.forEach(admin => { %>
                    <tr>
                         <td><%= admin.email %></td>
                         <td><a href="/admin/manage-assigned-orders/details/<%= admin._id %>/total"><%= admin.totalAssigned %></a></td>
                         <td><a href="/admin/manage-assigned-orders/details/<%= admin._id %>/pending"><%= admin.pendingCount %></a></td>
                         <td><a href="/admin/manage-assigned-orders/details/<%= admin._id %>/delivered"><%= admin.deliveredCount %></a></td>
                        <td class="actions-cell">
                             <form action="/admin/manage-assigned-orders/remove/<%= admin._id %>" method="POST" class="inline-form" onsubmit="return confirm('Are you sure you want to REMOVE Delivery Admin <%= admin.email %>? This will also unassign their active orders.');">
                                <button type="submit" class="btn btn-danger btn-sm"><i class="fas fa-user-times"></i> Remove Admin & Unassign Orders</button>
                            </form>
                        </td>
                    </tr>
                 <% }) %>
             </tbody>
         </table>
     <% } else { %>
        <p>No users found with the 'delivery_admin' role. <a href="/admin/manage-users">Manage users</a> to assign the role.</p>
     <% } %>
 </div>

 <%- include('../partials/footer') %>
